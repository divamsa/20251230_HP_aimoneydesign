# フェーズ4: ローカル環境での最終確認・テスト チェックリスト

## ✅ 1. 全機能の動作確認

### 1.1 全ページの表示確認
- [ ] トップページ (`/`) - 表示確認
- [ ] サービス紹介ページ (`/services`) - 表示確認
- [ ] 導入事例ページ (`/cases`) - 表示確認
- [ ] 会社情報ページ (`/about`) - 表示確認
- [ ] お問い合わせページ (`/contact`) - 表示確認
- [ ] ブログ一覧ページ (`/blog`) - 表示確認
- [ ] ブログ記事詳細ページ (`/blog/{id}`) - 表示確認
- [ ] サイトマップ (`/sitemap.xml`) - 表示確認
- [ ] robots.txt (`/robots.txt`) - 表示確認

### 1.2 お問い合わせフォームの送信確認
- [ ] 一般問い合わせフォーム - 送信確認
  - [ ] バリデーションエラーの表示確認
  - [ ] 成功メッセージの表示確認
  - [ ] 管理者へのメール送信確認
  - [ ] お客様への自動返信メール確認
- [ ] 資料請求フォーム - 送信確認
  - [ ] バリデーションエラーの表示確認
  - [ ] 成功メッセージの表示確認
  - [ ] 管理者へのメール送信確認
  - [ ] お客様への自動返信メール確認
- [ ] 無料相談フォーム - 送信確認
  - [ ] バリデーションエラーの表示確認
  - [ ] 成功メッセージの表示確認
  - [ ] 管理者へのメール送信確認
  - [ ] お客様への自動返信メール確認

### 1.3 管理画面の動作確認
- [ ] ログイン機能
  - [ ] ログインページ (`/login`) - 表示確認
  - [ ] ログイン成功時のリダイレクト確認
  - [ ] ログアウト機能の確認
- [ ] お問い合わせ管理
  - [ ] お問い合わせ一覧 (`/admin/contacts`) - 表示確認
  - [ ] フィルター機能（種別・ステータス）の確認
  - [ ] お問い合わせ詳細 (`/admin/contacts/{id}`) - 表示確認
  - [ ] ステータス更新機能の確認
  - [ ] CSVエクスポート機能の確認
- [ ] ブログ記事管理
  - [ ] ブログ記事一覧 (`/admin/posts`) - 表示確認
  - [ ] ブログ記事作成 (`/admin/posts/create`) - 作成確認
  - [ ] 画像アップロード機能の確認
  - [ ] ブログ記事編集 (`/admin/posts/{id}/edit`) - 編集確認
  - [ ] ブログ記事削除機能の確認
  - [ ] 公開日時設定の確認
- [ ] カテゴリ管理
  - [ ] カテゴリ一覧 (`/admin/categories`) - 表示確認
  - [ ] カテゴリ作成 (`/admin/categories/create`) - 作成確認
  - [ ] カテゴリ編集 (`/admin/categories/{id}/edit`) - 編集確認
  - [ ] カテゴリ削除機能の確認（記事が紐づいている場合は削除不可）

### 1.4 ブログ機能の動作確認
- [ ] ブログ一覧ページ
  - [ ] ページネーションの確認
  - [ ] カテゴリフィルターの確認
  - [ ] 検索機能の確認
- [ ] ブログ記事詳細ページ
  - [ ] 公開記事の表示確認
  - [ ] 下書き記事の非表示確認（404エラー）
  - [ ] 予約公開記事の非表示確認（404エラー）

## ✅ 2. レスポンシブデザインの確認

### 2.1 スマートフォン（320px - 768px）
- [ ] トップページ - レイアウト確認
- [ ] サービス紹介ページ - レイアウト確認
- [ ] 導入事例ページ - レイアウト確認
- [ ] 会社情報ページ - レイアウト確認
- [ ] お問い合わせページ - フォーム確認
- [ ] ブログ一覧ページ - レイアウト確認
- [ ] ブログ記事詳細ページ - レイアウト確認
- [ ] 管理画面 - レイアウト確認

### 2.2 タブレット（768px - 1024px）
- [ ] トップページ - レイアウト確認
- [ ] サービス紹介ページ - レイアウト確認
- [ ] 導入事例ページ - レイアウト確認
- [ ] 会社情報ページ - レイアウト確認
- [ ] お問い合わせページ - フォーム確認
- [ ] ブログ一覧ページ - レイアウト確認
- [ ] ブログ記事詳細ページ - レイアウト確認
- [ ] 管理画面 - レイアウト確認

### 2.3 デスクトップ（1024px以上）
- [ ] トップページ - レイアウト確認
- [ ] サービス紹介ページ - レイアウト確認
- [ ] 導入事例ページ - レイアウト確認
- [ ] 会社情報ページ - レイアウト確認
- [ ] お問い合わせページ - フォーム確認
- [ ] ブログ一覧ページ - レイアウト確認
- [ ] ブログ記事詳細ページ - レイアウト確認
- [ ] 管理画面 - レイアウト確認

## ✅ 3. セキュリティチェック

### 3.1 CSRF保護
- [x] すべてのフォームに`@csrf`が含まれている ✅
- [x] POST/PUT/PATCH/DELETEリクエストが保護されている ✅

### 3.2 XSS対策
- [x] Bladeの自動エスケープが機能している（`{!! !!}`の不使用） ✅
- [x] ユーザー入力が適切にエスケープされている ✅

### 3.3 SQLインジェクション対策
- [x] Eloquent ORMを使用（パラメータバインディング） ✅
- [x] 生のSQLクエリが使用されていない ✅

### 3.4 認証・認可
- [x] 管理画面が`auth`ミドルウェアで保護されている ✅
- [x] 管理画面が`admin`ミドルウェアで保護されている ✅
- [x] `EnsureAdmin`ミドルウェアが正しく設定されている ✅
- [x] 管理者メールアドレスの設定が可能 ✅

### 3.5 その他のセキュリティ対策
- [x] Nginxのセキュリティヘッダーが設定されている ✅
  - [x] X-Frame-Options: SAMEORIGIN ✅
  - [x] X-XSS-Protection: 1; mode=block ✅
  - [x] X-Content-Type-Options: nosniff ✅
- [x] reCAPTCHA v3が実装されている ✅
- [x] ファイルアップロードのバリデーションが実装されている ✅

## ✅ 4. パフォーマンス確認

### 4.1 N+1問題の対策
- [x] `BlogController::index()` - `with('category')`を使用 ✅
- [x] `BlogController::show()` - `load('category')`を使用 ✅
- [x] `PostAdminController::index()` - `with('category')`を使用 ✅
- [x] `PostAdminController::show()` - `load('category')`を使用 ✅
- [x] `CategoryAdminController::index()` - `withCount('posts')`を使用 ✅

### 4.2 クエリ最適化
- [x] ページネーションが使用されている ✅
- [x] 適切なインデックスが設定されている（主キー、外部キー） ✅
- [x] 不要なデータ取得がない ✅

### 4.3 その他のパフォーマンス対策
- [ ] 画像の最適化（必要に応じて）
- [ ] キャッシュの設定（必要に応じて）

## 📝 確認結果

### 確認日: _______________

### 確認者: _______________

### 備考:
- 実際のブラウザでの動作確認が必要です
- レスポンシブデザインの確認は、ブラウザの開発者ツールを使用してください
- メール送信の確認は、実際にメールが届くか確認してください

